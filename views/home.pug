doctype html
html(lang="ko")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Today's Snack
    link(href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;700&display=swap" rel="stylesheet")
    link(rel="stylesheet" href="/css/style.css")
    script(src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js")

  body
    .header
      h1.logo Rapa
      h2.title Today's Snack
      button.login-button(onclick=isLoggedIn ? "logout()" : "openModal()")= isLoggedIn ? "LOGOUT" : "LOGIN"

    // 로그인 모달
    #loginModal.modal
      .modal-content
        span.close(onclick="closeModal()") &times;
        h2.centered LOGIN
        form(onsubmit="submitLogin(event)")
          label(for="username") Username:
          input#username(type="text" name="username" required)
          label(for="password") Password:
          input#password(type="password" name="password" required)
          button.btn-primary(type="submit") login

    // 본문 내용
main.container.posts.mt-0
  if user && snacks.length > 0
    .container
      each snack in snacks
        if snack.name
          .card.my-3.col-12
            .card-body
              .row
                .col-4
                  - const base64Image = snack.image
                  img.card-img(src=base64Image, alt=snack.name)
                .col-6
                  .snack-title
                    h5= snack.name
                  .nutrition-info
                    if snack["nutritionalIngredients"]
                      - const ingredients = snack["nutritionalIngredients"];
                      if ingredients["칼로리"]
                        p.cal 칼로리: #{ingredients["칼로리"]}
                      if ingredients["탄"] || ingredients["단"] || ingredients["지"]
                        p.nutri 영양 성분:
                        |  탄수화물: #{ingredients["탄"] || '정보 없음'}, 단백질: #{ingredients["단"] || '정보 없음'}, 지방: #{ingredients["지"] || '정보 없음'}
                    else
                      p.alert.alert-info 영양 성분 정보가 없습니다.
                .col-2.d-flex.justify-content-center.align-items-center
                  .favorite-icon-container
                    button.favorite-icon(onclick=`likeSnack('${snack.name}')`) ♥
                    p.favorite-count #{snack.required || 0}
  else
    p.alert.alert-info(role='alert') 현재 데이터가 없습니다.


    // JavaScript 파일 포함
    script(src="/js/script.js")

